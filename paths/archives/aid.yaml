get:
  operationId: get_archive
  x-onedata-gri:
    type: op_archive
    id: ?BINDING(aid)
    aspect: instance
  summary: Get archive information
  tags:
    - Archive
  x-bash-codegen-description: |
    Returns the basic information about an archive.

    This operation requires `space_view_archives` privilege.
  description: |
    Returns the basic information about an archive.

    This operation requires `space_view_archives` privilege.

    ***Example cURL requests***

    **Get the basic information about archive**
    <!--- TODO VFS-7616 add metadata structure to the example-->

    ```bash
    curl -H "X-Auth-Token: $TOKEN" -X GET "https://$PROVIDER_HOST/api/v3/oneprovider/archives/$ARCHIVE_ID"

    {
        "archiveId": "ae6f78c89a97c9e78e891105f703bcb8",
        "state": "preserved",
        "datasetId": "1f4b762b1380946e73aeca574c77f14c",
        "rootDirectoryId": "00000000006CB663736861726547756964233339643236366165646365",
        "creationTime": 1576152793,
        "config": {
          "incremental": {"enabled": true},
          "includeDip": false,
          "layout": "bagit",
        },
        "preservedCallback": "https://example.org/preserved_archives",
        "deletedCallback": null,
        "description": "Archived dataset with experiment data from 2021.",
        "stats": {
            "filesArchived": 7940,
            "filesFailed": 3,
            "bytesArchived": 879245378924537
        },
        "baseArchiveId": "ae6f78c89a97c9e78e891105f703bcb8",
        "relatedAipId": "e891105f703bcb8ae6f78c89a97c9e78",
        "relatedDipId": "78e891105f703bcb8ae6f78c89a97c9e"
    }
    ```
  produces:
    - application/json
  responses:
    '200':
      description: The archive information.
      schema:
        $ref: '#/definitions/Archive'
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: Archive not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
    - name: aid
      in: path
      description: Archive Id
      type: string
      required: true
  x-code-samples:
    - lang: Shell
      source: "oneprovider-rest-cli getArchive aid=$ARCHIVE_ID"


patch:
  operationId: update_archive
  x-onedata-parse_body: as_json_params
  x-onedata-gri:
    type: op_archive
    id: ?BINDING(aid)
    aspect: instance
  summary: Update archive
  tags:
    - Archive
  x-bash-codegen-description: |
    Changes archive properties.

    This operation requires `space_manage_datasets` and `space_create_archives` privileges.

  description: |
    Changes archive properties.

    This operation requires `space_manage_datasets` and `space_create_archives` privileges.

    ***Example cURL requests***

    **Change archive description and callbacks**
    ```bash
    curl -H "X-Auth-Token: $TOKEN" -X PATCH "https://$PROVIDER_HOST/api/v3/oneprovider/archives/$ARCHIVE_ID" \
    -H "Content-Type: application/json" -d '{
        "description": "New archive description",
        "preservedCallback": "https://archives.org/preserved_archives",
        "deletedCallback": "https://archives.org/deleted_archives"
    }'
    ```
  consumes:
    - application/json
  responses:
    '204':
      description: Archive's properties has been changed.
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: Archive not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
    - name: aid
      in: path
      description: Archive Id
      type: string
      required: true
    - name: data
      in: body
      description: Archive properties
      schema:
        $ref: '#/definitions/ArchiveUpdateRequest'
      required: true
  x-code-samples:
    - lang: Shell
      source: "cat archive.json | oneprovider-rest-cli updateArchive aid=$ARCHIVE_ID -"