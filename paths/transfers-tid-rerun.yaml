post:
  operationId: rerun_transfer
  x-onedata-gri:
    type: op_transfer
    id: ?BINDING(tid)
    aspect: rerun
  tags:
    - Transfer
  summary: Rerun ended transfer
  x-bash-codegen-description: |
    Reruns ended transfer by creating a new, identical transfer.

    This operation requires:
      * `space_schedule_replication` when rerunning replication
      * `space_schedule_eviction` when rerunning eviction
      * `space_schedule_replication` and `space_schedule_eviction` when rerunning migration

    Additionally, rerunning transfers using indices requires `space_query_indices` privilege.
  description: |
    Reruns ended transfer by creating a new, identical transfer.

    This operation requires:
      * `space_schedule_replication` when rerunning replication
      * `space_schedule_eviction` when rerunning eviction
      * `space_schedule_replication` and `space_schedule_eviction` when rerunning migration

    Additionally, rerunning transfers using indices requires `space_query_indices` privilege.

    ***Example cURL requests***

    **Rerun finished transfer**
    ```bash
    curl --tlsv1.2 -X POST -H "X-Auth-Token: $TOKEN" \
    "https://$HOST/api/v3/oneprovider/transfers/$TRANSFER_ID/rerun"
    ```

  produces:
    - application/json
  responses:
    '201':
      description: >
        URI of the new transfer in form https://$HOST/api/v3/oneprovider/transfers/{tid} is
        returned in the response `Location` header.
      headers:
        Location:
          description: URI of the new transfer.
          type: string
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: Transfer with provided ID was not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
  - name: tid
    in: path
    description: Transfer ID.
    type: string
    required: true
  x-code-samples:
  - lang: Shell
    source: "oneprovider-rest-cli rerunTransfer tid=$TRANSFER_ID"
