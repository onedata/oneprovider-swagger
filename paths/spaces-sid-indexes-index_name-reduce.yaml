put:
  deprecated: true
  operationId: update_index_reduce_function
  x-onedata-parse_body: as_is
  x-onedata-gri:
    type: op_space
    id: ?BINDING(sid)
    aspect: "{view_reduce_function, ?BINDING(index_name)}"
  summary: Update index reduce function (deprecated)
  tags:
    - Space
  x-bash-codegen-description: |
    This enpoint is deprecated, please use [this one](#operation/update_view_reduce_function).

    This method replaces the existing index reduce function code with the request body.

    The reduce functions are defined as JavaScript functions which are executed
    on the database backend.

    This operation requires `space_manage_views` privilege.
  description: |
    This enpoint is deprecated, please use [this one](#operation/update_view_reduce_function).

    This method replaces the existing index reduce function code with the request body.

    The reduce functions are defined as JavaScript functions which are executed
    on the database backend.

    This operation requires `space_manage_views` privilege.

    ***Example cURL requests***

    **Update space index**
    ```bash
    curl -H "X-Auth-Token: $TOKEN" -X PUT \
    -H "Content-type: application/javascript" \
    -d "@./my_improved_reduce_fun.js" \
    https://$HOST/api/v3/oneprovider/spaces/$SPACE_ID/indexes/$INDEX_NAME/reduce
    ```

  consumes:
    - application/javascript
  responses:
    '204':
      description: Index reduce function updated successfully.
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: File not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
  - name: sid
    in: path
    description: >
      Space Id in which index exist.
    type: string
    required: true
  - name: index_name
    in: path
    description: Name of the index.
    type: string
    required: true
  - name: body
    in: body
    description: The index reduce function.
    schema:
      type: string
    required: true
  x-code-samples:
  - lang: Shell
    source: "cat index.js | oneprovider-rest-cli updateIndexReduceFunction sid=$SPACE_ID index_name=$INDEX_NAME -"


delete:
  deprecated: true
  operationId: remove_index_reduce_function
  x-onedata-gri:
    type: op_space
    id: ?BINDING(sid)
    aspect: "{view_reduce_function, ?BINDING(index_name)}"
  summary: Remove index reduce function (deprecated)
  tags:
    - Space
  x-bash-codegen-description: |
    This enpoint is deprecated, please use [this one](#operation/remove_view_reduce_function).

    This method removes the index reduce function.

    This operation requires `space_manage_views` privilege.
  description: |
    This enpoint is deprecated, please use [this one](#operation/remove_view_reduce_function).

    This method removes the index reduce function.

    This operation requires `space_manage_views` privilege.

    ***Example cURL requests***

    **Remove index reduce function**
    ```bash
    curl -H "X-Auth-Token: $TOKEN" -X DELETE \
    https://$HOST/api/v3/oneprovider/spaces/$SPACE_ID/indexes/$INDEX_NAME/reduce
    ```

  responses:
    '204':
      description: Index reduce function removed successfully.
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: File not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
  - name: sid
    in: path
    description: >
      Space Id in which index exist.
    type: string
    required: true
  - name: index_name
    in: path
    description: Name of the index.
    type: string
    required: true
  x-code-samples:
  - lang: Shell
    source: "oneprovider-rest-cli removeIndexReduceFunction sid=$SPACE_ID index_name=$INDEX_NAME"
