get:
  operationId: get_all_transfers
  x-onedata-gri:
    type: op_space
    id: ?BINDING(sid)
    aspect: transfers
  tags:
    - Transfer
  summary: Get all space transfers
  x-bash-codegen-description: |
    Returns the list of all transfer IDs in a space with given state.
    The list is broken down into pages, each with length less or equal to the
    limit parameter. If the nextPageToken in the response has non-null value, there are
    more transfers to list - provide the token in the page_token parameter in
    the following request.

    This operation requires `space_view_transfers` privilege.
  description: |
    Returns the list of all transfer IDs in a space with given state.
    The list is broken down into pages, each with length less or equal to the
    limit parameter. If the nextPageToken in the response has non-null value, there are
    more transfers to list - provide the token in the page_token parameter in
    the following request.

    This operation requires `space_view_transfers` privilege.

    ***Example cURL requests***

    **List at most 3 ongoing transfers starting from page id 757136151113c2f**
    ```bash
    curl -H "X-Auth-Token: $TOKEN" \
    -X GET "https://$PROVIDER_HOST/api/v3/oneprovider/spaces/$SPACE_ID/transfers?state=ongoing&limit=3&page_token=757136151113c2f"

    {
        "transfers": [
            "2727a9fe5f5df6b43a8033386d2990e8ch5df6",
            "4bd9b58f6387622bf07f7388945e4fc4ch8762",
            "579a785181331e618b26980166b6ba2fch331e"
        ],
        "nextPageToken": "8471726779817b3a"
    }
    ```
  produces:
    - application/json
  responses:
    '200':
      description: The list of transfer IDs.
      schema:
        type: object
        properties:
          transfers:
            type: array
            description: The list of transfer Ids.
            items:
              type: string
          nextPageToken:
            $ref: '#/definitions/ListPageToken'
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: Oneprovider REST API not available.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
  - name: sid
    in: path
    description: >
      Space Id in which to list transfers.
    type: string
    required: true
  - name: state
    in: query
    description: >
      Specifies the state of transfers to list. The default is "ongoing".
    type: string
    enum:
      - waiting
      - ongoing
      - ended
    required: false
  - name: limit
    in: query
    description: >
      Allows to limit the number of returned transfers.
    type: integer
    required: false
    minimum: 1
    maximum: 1000
    default: 100
  - name: page_token
    in: query
    description: >
      Allows to start the listing from a certain point, identified by the page token.
    type: string
    required: false
  x-code-samples:
  - lang: Shell
    source: "oneprovider-rest-cli sid=$SPACE_ID getAllTransfers state=ongoing limit=20 page_token=757136151113c2f"
