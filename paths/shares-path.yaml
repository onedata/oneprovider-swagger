get:
  operationId: get_share
  x-onedata-gri:
    type: op_share
    id: ?PATH_BINDING
    aspect: shared_dir
  summary: Get share info by folder path
  tags:
    - Share
  x-bash-codegen-description: |
    Returns the basic information about shared folder specified by path.
  description: |
    Returns the basic information about shared folder specified by path.

    ***Example cURL requests***

    **Returns the basic information about shared folder specified by path.**
    ```bash
    curl --tlsv1.2 -X GET -H "X-Auth-Token: $TOKEN" \
    "https://$HOST/api/v3/oneprovider/shares/MySpace1/Folder2"

    {
      "shareId": "1f4b762b1380946e73aeca574c77f14c",
      "name": "MyNewShare",
      "publicUrl": "https://onedata.org/shares/1f4b762b1380946e73aeca574c77f14c",
      "rootFileId": "00000000006CB663736861726547756964233339643236366165646365\
      6266666164353939663761373734313235363166342336656331613534313362366634653\
      2623031613563383561386664373937653223316634623736326231333830393436653733\
      6165636135373463373766313463",
      "spaceId": "6ec1a5413b6f4e2b01a5c85a8fd797e2",
      "handleId" "doi:10.15911/MyShares.726855"
    }
    ```
  produces:
    - application/json
  responses:
    '200':
      description: The share information.
      schema:
        $ref: '#/definitions/Share'
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: File or share not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
    - name: path
      in: path
      description: >
        Full path to the folder, starting with space name (e.g. '/MySpace1/Folder2').
        The whole space can also be shared (e.g. '/MySpace1').
      type: string
      required: true
  x-code-samples:
    - lang: Shell
      source: "oneprovider-rest-cli getShare path='/MySpace1/Folder2'"


post:
  operationId: create_share
  x-onedata-parse_body: as_json_params
  x-onedata-gri:
    type: op_share
    id: ?PATH_BINDING
    aspect: shared_dir
  summary: Share a folder by path
  tags:
    - Share
  x-bash-codegen-description: |
    Shares a folder specified by path. Shared folder can be viewed by everyone
    through public URL. This operation assigns a public share ID that can be
    used to manage share, see:
      * [Get basic information about shared folder](#operation/get_share_by_public_id)
      * [Change name of the shared folder](#operation/update_share_name_by_public_id)
      * [Unshare folder](#operation/remove_share_by_public_id)

    Returns 400 if path points to a regular file.
  description: |
    Shares a folder specified by path. Shared folder can be viewed by everyone
    through public URL. This operation assigns a public share ID that can be
    used to manage share, see:
      * [Get basic information about shared folder](#operation/get_share_by_public_id)
      * [Change name of the shared folder](#operation/update_share_name_by_public_id)
      * [Unshare folder](#operation/remove_share_by_public_id)

    Returns 400 if path points to a regular file.

    ***Example cURL requests***

    **Shares a folder specified by path**
    ```bash
    curl --tlsv1.2 -H "X-Auth-Token: $TOKEN" -X POST \
    -H "Content-type: application/json" \
    -d '{ "name": "MyShare" }' \
    "https://$HOST/api/v3/oneprovider/shares/MySpace1/Folder2"
    ```
  consumes:
    - application/json
  responses:
    '200':
      description: Id of the created share (public share ID)
      schema:
        type: string
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: File not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
    - name: path
      in: path
      description: >
        Full path to the folder, starting with space name (e.g. '/MySpace1/Folder2').
        The whole space can also be shared (e.g. '/MySpace1').
      type: string
      required: true
    - name: name
      in: body
      description: Share name.
      schema:
        type: string
      required: true
  x-code-samples:
    - lang: Shell
      source: "oneprovider-rest-cli createShare path='/MySpace1/Folder2' MyShare"

patch:
  operationId: update_share_name
  x-onedata-parse_body: as_json_params
  x-onedata-gri:
    type: op_share
    id: ?PATH_BINDING
    aspect: shared_dir
  summary: Rename share by folder path
  tags:
    - Share
  x-bash-codegen-description: |
    Changes name of the shared folder specified by path.
  description: |
    Changes name of the shared folder specified by path.

    ***Example cURL requests***

    **Changes name of the shared folder specified by path**
    ```bash
    curl --tlsv1.2 -H "X-Auth-Token: $TOKEN" -X PATCH \
    -H "Content-type: application/json" \
    -d '{ "name": "NewShareName" }' \
    "https://$HOST/api/v3/oneprovider/shares/MySpace1/Folder2"
    ```
  consumes:
    - application/json
  responses:
    '200':
      description: Share's name has been changed.
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: File not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
    - name: path
      in: path
      description: >
        Full path to the folder, starting with space name (e.g. '/MySpace1/Folder2').
        The whole space can also be shared (e.g. '/MySpace1').
      type: string
      required: true
    - name: name
      in: body
      description: New name for the share.
      schema:
        type: string
      required: true
  x-code-samples:
    - lang: Shell
      source: "oneprovider-rest-cli updateShareName path='/MySpace1/Folder2' NewShareName"


delete:
  operationId: remove_share
  x-onedata-gri:
    type: op_share
    id: ?PATH_BINDING
    aspect: shared_dir
  summary: Unshare a folder by path
  tags:
    - Share
  x-bash-codegen-description: |
    Unshares a folder by path. This operation will not remove data from folder
    but data will not be accessible through public url anymore.

  description: |
    Unshares a folder by path. This operation will not remove data from folder
    but data will not be accessible through public url anymore.

    ***Example cURL requests***

    **Unshares a folder by path**
    ```bash
    curl --tlsv1.2 -X DELETE -H "X-Auth-Token: $TOKEN" \
    "https://$HOST/api/v3/oneprovider/shares/MySpace1/Folder2"
    ```
  responses:
    '204':
      description: Folder has been unshared.
    '400':
      description: Invalid request.
      schema:
        $ref: '#/definitions/Error'
    '403':
      description: Forbidden request.
      schema:
        $ref: '#/definitions/Error'
    '404':
      description: File or share not found.
      schema:
        $ref: '#/definitions/Error'
    '500':
      description: Internal server error.
      schema:
        $ref: '#/definitions/Error'
  parameters:
    - name: path
      in: path
      description: >
        Full path to the folder, starting with space name (e.g. '/MySpace1/Folder2').
        The whole space can also be shared (e.g. '/MySpace1').
      type: string
      required: true
  x-code-samples:
    - lang: Shell
      source: "oneprovider-rest-cli removeShare path='/MySpace1/Folder2'"
